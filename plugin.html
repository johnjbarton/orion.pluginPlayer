<!DOCTYPE html>
<html>
<head>
  <meta name="copyright" content="Copyright (c) Google, Inc 2011." >
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="orion/plugin.js"></script>
  <script>
      /*globals window eclipse console*/
    var serviceImpl = {
      run: function(text) {
        /* no-op should not be called? */
      }
    };
    window.onload = function() {
      // eg http://127.0.0.2:8080/...
      var baseURL = window.location.toString();
      baseURL = baseURL.split('/');
      baseURL = baseURL.slice(0,3);
      baseURL = baseURL.join('/');
      console.log("pluginPlayer: baseURL="+baseURL);
      var provider = new eclipse.PluginProvider();
      provider.registerServiceProvider(
        "orion.page.link",
        serviceImpl,
        {
          name: "PluginPlayer",
          id: "orion.pluginPlayer",
          href: baseURL+"/orion.pluginPlayer/pluginPlayer.html"
        }
      );
      provider.connect(
        function callback(){
          console.log("orion.pluginPlayer connected, home page: https://github.com/johnjbarton/orion.pluginPlayer");
        },
        function errback() {
          console.error("orion.pluginPlayer Plugin Error: ", arguments);
        }
      );
    };
  </script>
</head>
<body>
</body>
</html>
